<ng-container *ngrxLet="form$ as form">
  <ng-container *ngrxLet="isLoading$ as isLoading">
    <div class="account-actions" *ngIf="form">
      <div class="account-actions_title">
        <div class="b1-title3">
          {{ 'components.acct.accountTurnovers' | translate }}
        </div>
      </div>
      <div class="account-actions_buttons">
        <div class="b1-page-buttons">
          <b1-button
            class="b1-mr-4 b1-ml-4"
            icon="turnovers"
            label="components.acct.getStatement"
            (btnClick)="showStatement()"
            [isDisabled]="isLoading"></b1-button>

          <b1-page-button
            (b1Click)="showRequisites()"
            icon="file-details"
            label="components.acct.share"
            [disabled]="isLoading">
          </b1-page-button>
          <b1-page-button
            (b1Click)="showExport()"
            icon="export"
            label="components.acct.geExportStatement"
            [disabled]="isLoading">
          </b1-page-button>
        </div>

        <b1-dropdown class="account-actions__more-button" label="account actions" menuWidth="250px">
          <b1-more-button slot="toggle" [bordered]="true"></b1-more-button>
          <b1-dropdown-link icon="turnovers" label="components.acct.getStatement" (btnClick)="showStatement()">
          </b1-dropdown-link>
          <b1-dropdown-link icon="file-details" label="components.acct.share" (btnClick)="showRequisites()">
          </b1-dropdown-link>
          <b1-dropdown-link
            icon="export"
            label="components.acct.geExportStatement"
            (btnClick)="showExport()"
            [separator]="true">
          </b1-dropdown-link>
          <!-- TODO ADD  IsPayingAccount on backend-->
          <b1-dropdown-link
            icon="cards"
            [label]="('components.acct.newPayment' | translate) + ' ' + ('components.pay.actions.innerPay' | translate)"
            ng-if="account.IsPayingAccount"
            ng-click="accountsCtrl.accActions.createPayment($event, account.Id,'INNER')">
          </b1-dropdown-link>
          <!-- TODO ADD  IsPayingAccount on backend-->
          <b1-dropdown-link
            icon="country"
            [label]="
              ('components.acct.newPayment' | translate) + ' ' + ('components.pay.actions.inUrainePay' | translate)
            "
            ng-if="account.IsPayingAccount"
            ng-click="accountsCtrl.accActions.createPayment($event, account.Id, 'OUTER')">
          </b1-dropdown-link>
          <!-- TODO ADD  IsPayingAccount on backend-->
          <!-- TODO ADD Directive role in -->
          <b1-dropdown-link
            icon="swift"
            [label]="('components.acct.newPayment' | translate) + ' ' + ('components.pay.actions.swift' | translate)"
            ng-if="account.IsPayingAccount"
            data-role-in="Director,Accountant,ForeignCurrencyPaymentsManager"
            ng-show="accountsCtrl.isForeignCurrency(account.CurrencyCode)"
            ng-click="accountsCtrl.accActions.createPayment($event, account.Id,
            'SWIFT')">
          </b1-dropdown-link>
        </b1-dropdown>
      </div>
      <form class="account-actions_calendar" [ngrxFormState]="form">
        <div class="b1-page-inputWithIcon">
          <input
            class="b1-datepicker__input b1-rangepicker"
            b1-daterangepicker
            startKey="start"
            endKey="end"
            [disabled]="isLoading"
            [ngrxFormControlState]="form.controls.range"
            [ngrxValueConverter]="rangeValueConverter"
            name="daterange"
            [ranges]="ranges"
            readonly />
          <label for="calendar" b1-icon icon="calendar"></label>
        </div>
      </form>
    </div>
    <b1-card-loader [isLoading]="isLoading$"></b1-card-loader>
  </ng-container>
</ng-container>
